{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app\"\n};\nconst _hoisted_2 = {\n  class: \"menu\"\n};\nconst _hoisted_3 = {\n  class: \"page\"\n};\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"login\"\n};\nconst _hoisted_6 = {\n  key: 1,\n  class: \"info\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_H2 = _resolveComponent(\"H2\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_router_link, {\n    to: \"/\",\n    class: \"router\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"首頁\")]),\n    _: 1 /* STABLE */\n  }), $data.isLoggedIn ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createVNode(_component_router_link, {\n    to: {\n      path: '/suspiciousplayer',\n      query: {\n        token: $data.isLoggedIn ? $data.userToken : null\n      }\n    },\n    class: \"router\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"可疑玩家\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"]), _createVNode(_component_router_link, {\n    to: {\n      path: '/crossbet',\n      query: {\n        token: $data.isLoggedIn ? $data.userToken : null\n      }\n    },\n    class: \"router\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"對投查詢\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"]), _createCommentVNode(\" <router-link\\n            :to=\\\"{\\n              path: '/currency_conversion',\\n              query: { token: isLoggedIn ? userToken : null },\\n            }\\\"\\n            class=\\\"router\\\"\\n            >貨幣換算</router-link\\n          > \"), _createVNode(_component_router_link, {\n    to: {\n      path: '/playroad',\n      query: {\n        token: $data.isLoggedIn ? $data.userToken : null\n      }\n    },\n    class: \"router\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"玩家路書\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"]), _createVNode(_component_router_link, {\n    to: {\n      path: '/api',\n      query: {\n        token: $data.isLoggedIn ? $data.userToken : null\n      }\n    },\n    class: \"router\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"API\")]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"to\"]), _createCommentVNode(\" <router-link\\n            :to=\\\"{ path: '/tgbot', query: { token: isLoggedIn ? userToken : null } }\\\"\\n            class=\\\"router\\\"\\n            >TG BOT</router-link\\n          > \")])) : _createCommentVNode(\"v-if\", true)]), !$data.isLoggedIn ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.userCode = $event),\n    type: \"text\",\n    placeholder: \"帳號\",\n    class: \"input\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userCode]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.userPwd = $event),\n    type: \"password\",\n    placeholder: \"密碼\",\n    class: \"input\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.userPwd]]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.login && $options.login(...args)),\n    class: \"button\"\n  }, \"登入\")])) : _createCommentVNode(\"v-if\", true), $data.isLoggedIn ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createVNode(_component_H2, {\n    style: {\n      \"margin-right\": \"10px\",\n      \"color\": \"#817777\"\n    }\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString($data.currentTime), 1 /* TEXT */)]),\n\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.logout && $options.logout(...args)),\n    class: \"button\"\n  }, \"登出\")])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", null, [_createVNode(_component_router_view)])]);\n}","map":{"version":3,"names":["id","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_router_link","to","$data","isLoggedIn","_hoisted_4","userToken","path","query","token","_createCommentVNode","_hoisted_5","userCode","$event","type","placeholder","userPwd","onClick","_cache","args","$options","login","_hoisted_6","_component_H2","style","currentTime","logout","_component_router_view"],"sources":["C:\\Users\\u0921\\vue-ace1\\src\\App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <div class=\"menu\">\n      <div class=\"page\">\n        <router-link to=\"/\" class=\"router\">首頁</router-link>\n        <div v-if=\"isLoggedIn\">\n          <router-link\n            :to=\"{\n              path: '/suspiciousplayer',\n              query: { token: isLoggedIn ? userToken : null },\n            }\"\n            class=\"router\"\n            >可疑玩家</router-link\n          >\n          <router-link\n            :to=\"{ path: '/crossbet', query: { token: isLoggedIn ? userToken : null } }\"\n            class=\"router\"\n            >對投查詢</router-link\n          >\n          <!-- <router-link\n            :to=\"{\n              path: '/currency_conversion',\n              query: { token: isLoggedIn ? userToken : null },\n            }\"\n            class=\"router\"\n            >貨幣換算</router-link\n          > -->\n          <router-link\n            :to=\"{ path: '/playroad', query: { token: isLoggedIn ? userToken : null } }\"\n            class=\"router\"\n            >玩家路書</router-link\n          >\n          <router-link\n            :to=\"{ path: '/api', query: { token: isLoggedIn ? userToken : null } }\"\n            class=\"router\"\n            >API</router-link\n          >\n          <!-- <router-link\n            :to=\"{ path: '/tgbot', query: { token: isLoggedIn ? userToken : null } }\"\n            class=\"router\"\n            >TG BOT</router-link\n          > -->\n        </div>\n      </div>\n\n      <div v-if=\"!isLoggedIn\" class=\"login\">\n        <input v-model=\"userCode\" type=\"text\" placeholder=\"帳號\" class=\"input\" />\n        <input v-model=\"userPwd\" type=\"password\" placeholder=\"密碼\" class=\"input\" />\n        <button @click=\"login\" class=\"button\">登入</button>\n      </div>\n      <div v-if=\"isLoggedIn\" class=\"info\">\n        <H2 style=\"margin-right: 10px; color: #817777\">{{ currentTime }}</H2>\n        <button @click=\"logout\" class=\"button\">登出</button>\n      </div>\n    </div>\n    <div>\n      <router-view></router-view>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      userCode: \"\", // 使用者帳號綁定的資料屬性\n      userPwd: \"\", // 使用者密碼綁定的資料屬性\n      isLoggedIn: false, //預設登入狀態\n      userToken: \"\",\n      currentTime: this.getCurrentTime(),\n    };\n  },\n\n  mounted() {\n    this.isLoggedIn = localStorage.getItem(\"isLoggedIn\") === \"true\";\n    this.userToken = localStorage.getItem(\"userToken\");\n    this.checkTokenExpiration();\n\n    console.log(\"登入狀態：\", this.isLoggedIn);\n    console.log(\"Token：\", this.userToken);\n\n    //更新當前時間\n    setInterval(() => {\n      this.currentTime = this.getCurrentTime();\n      this.checkTokenExpiration();\n    }, 1000);\n  },\n\n  methods: {\n    async login() {\n      try {\n        const response = await axios.post(\n          \"https://nc-ugs-bo.ms16618.com/mgtapipb.MgtApiService/AuthLogin\",\n          {\n            userCode: this.userCode,\n            userPwd: this.userPwd,\n          },\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              accept: \"application/json\",\n            },\n          }\n        );\n\n        // 處理 API 回應的邏輯，可能是導航到其他頁面或顯示成功訊息等\n        console.log(\"登入成功！\", response.data.token);\n\n        // 將 token 儲存到 userToken 中\n        this.userToken = response.data.token;\n\n        // 設定 isLoggedIn 為 true\n        this.isLoggedIn = true;\n\n        // 將登入狀態保存到 localStorage\n        localStorage.setItem(\"isLoggedIn\", true);\n\n        // 设置过期时间为半小时后\n        const expirationTime = new Date().getTime() + 30 * 60 * 1000; // 半小时后的时间戳\n        localStorage.setItem(\"tokenExpiration\", expirationTime);\n\n        // 將Token保存到localStorage\n        localStorage.setItem(\"userToken\", this.userToken);\n\n        // 使用 router 的 push 方法導航到其他頁面，並將 token 作為查詢參數傳遞\n        this.$router.push({\n          query: { token: this.userToken },\n        });\n      } catch (error) {\n        // 處理登入失敗的情況，例如顯示錯誤訊息\n        console.error(\"登入失敗：\", error);\n      }\n    },\n\n    // 检查 token 是否过期\n    checkTokenExpiration() {\n      const expirationTime = localStorage.getItem(\"tokenExpiration\");\n      if (!expirationTime) {\n        // 如果没有过期时间，表示用户未登录或登录已过期\n        this.logout();\n      } else {\n        const currentTime = new Date().getTime();\n        if (currentTime > expirationTime) {\n          // 过期时间小于当前时间，表示 token 已过期\n          this.logout();\n        }\n      }\n    },\n\n    logout() {\n      // 清空 localStorage 中的登入狀態和Token\n      localStorage.removeItem(\"isLoggedIn\");\n      localStorage.removeItem(\"userToken\");\n      localStorage.removeItem(\"tokenExpiration\");\n\n      // 設定 isLoggedIn 為 false，清空使用者名稱\n      this.isLoggedIn = false;\n\n      // 使用 router 的 push 方法導航回首頁\n      this.$router.push({ name: \"home\" });\n    },\n    getCurrentTime() {\n      const now = new Date();\n      const hours = now.getHours().toString().padStart(2, \"0\");\n      const minutes = now.getMinutes().toString().padStart(2, \"0\");\n      const seconds = now.getSeconds().toString().padStart(2, \"0\");\n      return `${hours}:${minutes}:${seconds}`;\n    },\n  },\n};\n</script>\n\n<style>\n.menu {\n  padding: 10px;\n  text-align: center;\n  position: fixed;\n  top: 0%;\n  width: 100%;\n  background: linear-gradient(to right, #e4efdc, #aec0c0);\n  z-index: 1000; /* 設定層級，確保選單在其他元素上面 */\n  display: flex;\n  justify-content: space-between; /* 讓內容在 flex 容器中平均分布 */\n  align-items: center; /* 垂直置中 */\n}\n\n.page {\n  display: flex;\n  align-items: center; /* 垂直置中 */\n}\n\n.input {\n  margin-right: 5px;\n  padding: 7px;\n  width: 100px;\n  border-color: #a6c0e8;\n  border-radius: 5px; /* 輸入框的圓角 */\n}\n\n.login {\n  position: fixed;\n  right: 1%;\n}\n\n.info {\n  position: fixed;\n  right: 1%;\n  display: flex;\n  align-items: center; /* 垂直置中 */\n}\n\n.user {\n  margin-right: 10px;\n  font-weight: bold;\n}\n.button {\n  padding: 7px;\n  width: 100px;\n  font-weight: bold;\n  border: none; /* 移除按鈕的邊框 */\n  border-radius: 10px; /* 輸入框的圓角 */\n  background: linear-gradient(to top, #e4efdc, #84c7e3);\n}\n\n.button:hover {\n  background-color: #a6c0e8;\n  color: white;\n  cursor: pointer;\n}\n\n.router {\n  color: #817777;\n  font-weight: bold;\n  font-family: Tahoma, sans-serif;\n  font-size: 20px;\n  margin-right: 40px;\n  text-decoration: none;\n  cursor: pointer;\n  transition: color 0.6s; /* 過渡效果 */\n}\n\n.router:hover {\n  color: #ffffffc2; /* 滑鼠懸停時改變文字顏色為白色 */\n}\n</style>\n"],"mappings":";;EACOA,EAAE,EAAC;AAAK;;EACNC,KAAK,EAAC;AAAM;;EACVA,KAAK,EAAC;AAAM;;;;;;EA0COA,KAAK,EAAC;;;;EAKPA,KAAK,EAAC;;;;;;uBAjDjCC,mBAAA,CAyDM,OAzDNC,UAyDM,GAxDJC,mBAAA,CAoDM,OApDNC,UAoDM,GAnDJD,mBAAA,CAwCM,OAxCNE,UAwCM,GAvCJC,YAAA,CAAmDC,sBAAA;IAAtCC,EAAE,EAAC,GAAG;IAACR,KAAK,EAAC;;sBAAS,MAAE,C,iBAAF,IAAE,E;;MAC1BS,KAAA,CAAAC,UAAU,I,cAArBT,mBAAA,CAqCM,OAAAU,UAAA,GApCJL,YAAA,CAOCC,sBAAA;IANEC,EAAE;;;eAA2EC,KAAA,CAAAC,UAAU,GAAGD,KAAA,CAAAG,SAAS;MAAA;;IAIpGZ,KAAK,EAAC;;sBACL,MAAI,C,iBAAJ,MAAI,E;;6BAEPM,YAAA,CAICC,sBAAA;IAHEC,EAAE;MAAAK,IAAA;MAAAC,KAAA;QAAAC,KAAA,EAAuCN,KAAA,CAAAC,UAAU,GAAGD,KAAA,CAAAG,SAAS;MAAA;IAAA;IAChEZ,KAAK,EAAC;;sBACL,MAAI,C,iBAAJ,MAAI,E;;6BAEPgB,mBAAA,gPAOK,EACLV,YAAA,CAICC,sBAAA;IAHEC,EAAE;MAAAK,IAAA;MAAAC,KAAA;QAAAC,KAAA,EAAuCN,KAAA,CAAAC,UAAU,GAAGD,KAAA,CAAAG,SAAS;MAAA;IAAA;IAChEZ,KAAK,EAAC;;sBACL,MAAI,C,iBAAJ,MAAI,E;;6BAEPM,YAAA,CAICC,sBAAA;IAHEC,EAAE;MAAAK,IAAA;MAAAC,KAAA;QAAAC,KAAA,EAAkCN,KAAA,CAAAC,UAAU,GAAGD,KAAA,CAAAG,SAAS;MAAA;IAAA;IAC3DZ,KAAK,EAAC;;sBACL,MAAG,C,iBAAH,KAAG,E;;6BAENgB,mBAAA,wLAIK,C,2CAIGP,KAAA,CAAAC,UAAU,I,cAAtBT,mBAAA,CAIM,OAJNgB,UAIM,G,gBAHJd,mBAAA,CAAuE;+DAAvDM,KAAA,CAAAS,QAAQ,GAAAC,MAAA;IAAEC,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC,IAAI;IAACrB,KAAK,EAAC;iDAA7CS,KAAA,CAAAS,QAAQ,E,mBACxBf,mBAAA,CAA0E;+DAA1DM,KAAA,CAAAa,OAAO,GAAAH,MAAA;IAAEC,IAAI,EAAC,UAAU;IAACC,WAAW,EAAC,IAAI;IAACrB,KAAK,EAAC;iDAAhDS,KAAA,CAAAa,OAAO,E,GACvBnB,mBAAA,CAAiD;IAAxCoB,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,KAAA,IAAAD,QAAA,CAAAC,KAAA,IAAAF,IAAA,CAAK;IAAEzB,KAAK,EAAC;KAAS,IAAE,E,wCAE/BS,KAAA,CAAAC,UAAU,I,cAArBT,mBAAA,CAGM,OAHN2B,UAGM,GAFJtB,YAAA,CAAqEuB,aAAA;IAAjEC,KAA0C,EAA1C;MAAA;MAAA;IAAA;EAA0C;sBAAC,MAAiB,C,kCAAdrB,KAAA,CAAAsB,WAAW,iB;;;MAC7D5B,mBAAA,CAAkD;IAAzCoB,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAM,MAAA,IAAAN,QAAA,CAAAM,MAAA,IAAAP,IAAA,CAAM;IAAEzB,KAAK,EAAC;KAAS,IAAE,E,0CAG7CG,mBAAA,CAEM,cADJG,YAAA,CAA2B2B,sBAAA,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}