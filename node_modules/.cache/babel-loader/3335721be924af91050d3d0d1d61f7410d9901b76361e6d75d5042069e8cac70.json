{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  props: {\n    token: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      userCode: \"\",\n      // 用戶名綁定的資料屬性\n      roundCode: \"\",\n      timeFrom: \"\",\n      timeTo: \"\",\n      page: 1,\n      pageSize: 1000,\n      responseData: null,\n      userbetCode: [],\n      // 新增用於存儲 betCode 的數組\n      overviewData: null,\n      detailedData: null\n    };\n  },\n  methods: {\n    async submit() {\n      this.responseData = null;\n      this.overviewData = null;\n      this.userbetCode = null;\n      this.detailedData = null;\n      if (!this.userCode) {\n        // 用戶名為空，顯示錯誤信息並中止提交\n        alert(\"用戶名不能為空\");\n        return;\n      }\n      if (!this.timeFrom) {\n        // 時間為空，顯示錯誤信息並中止提交\n        alert(\"時間不能為空\");\n        return;\n      }\n      if (!this.timeTo) {\n        // 時間為空，顯示錯誤信息並中止提交\n        alert(\"時間不能為空\");\n        return;\n      }\n      try {\n        const response = await axios.post(\"https://nc-ugs-bo.ms16618.com/mgtapipb.MgtApiService/RptBetRec\", {\n          userCode: this.userCode,\n          timeFrom: this.timeFrom + \":00\",\n          timeTo: this.timeTo + \":00\",\n          page: this.page,\n          pageSize: this.pageSize,\n          roundCode: this.roundCode\n        }, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            accept: \"application/json\",\n            Authorization: `Bearer ${this.token}` // 在這裡添加 token 到標頭中\n          }\n        });\n\n        // 將API返回的數據保存在responseData中，以便在模板中顯示\n        this.responseData = response.data;\n        console.log(`responseData：`, this.responseData);\n\n        // 將相關數據賦值給 overviewData\n        this.overviewData = {\n          total: this.responseData.total,\n          totalCurrencyCode: this.responseData.totalCurrencyCode,\n          totalBetAmt: this.responseData.totalBetAmt,\n          totalBetAdjAmt: this.responseData.totalBetAdjAmt,\n          totalBetRetAmt: this.responseData.totalBetRetAmt,\n          totalSupvRecvAmt: this.responseData.totalSupvRecvAmt\n        };\n        console.log(`overviewData的data：`, this.overviewData);\n        this.userbetCode = response.data.data.map(bet => ({\n          betCode: bet.betCode,\n          betId: bet.betId\n        }));\n        console.log(`betCode：`, this.userbetCode);\n      } catch (error) {\n        // 請求失敗\n        console.error(\"請求失敗：\", error);\n      }\n    },\n    // 創建一個方法來根據 betCode 返回對應的圖片路徑\n    getImagePath(betCode) {\n      const imageMapping = {\n        BANKER: require(\"@/assets/BANKER.png\"),\n        PLAYER: require(\"@/assets/PLAYER.png\"),\n        TIE: require(\"@/assets/TIE.png\")\n\n        // 其他 betCode 對應的路徑\n      };\n\n      // 如果找到對應的圖片路徑，則返回它；否則，返回默認的圖片路徑\n      return imageMapping[betCode] || require(\"@/assets/default.png\");\n    },\n    //點擊圖片\n    showBetDetails(betId) {\n      // 找到相應的投注紀錄\n      const betDetails = this.responseData.data.find(bet => bet.betId === betId);\n\n      // 將投注紀錄保存到變數中\n      this.detailedData = betDetails;\n    },\n    formatTime(time) {\n      const options = {\n        year: \"numeric\",\n        month: \"numeric\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"numeric\",\n        second: \"numeric\",\n        hour12: false,\n        timeZone: \"Asia/Taipei\"\n      };\n      return new Date(time).toLocaleString(\"zh-TW\", options);\n    }\n  }\n};","map":{"version":3,"names":["axios","props","token","type","String","required","data","userCode","roundCode","timeFrom","timeTo","page","pageSize","responseData","userbetCode","overviewData","detailedData","methods","submit","alert","response","post","headers","accept","Authorization","console","log","total","totalCurrencyCode","totalBetAmt","totalBetAdjAmt","totalBetRetAmt","totalSupvRecvAmt","map","bet","betCode","betId","error","getImagePath","imageMapping","BANKER","require","PLAYER","TIE","showBetDetails","betDetails","find","formatTime","time","options","year","month","day","hour","minute","second","hour12","timeZone","Date","toLocaleString"],"sources":["C:\\Users\\u0921\\vue-ace1\\src\\components\\Playroadpage.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\r\n<template>\r\n  <div style=\"margin-top: 4%\">\r\n    <label for=\"userCode\" class=\"custom-label\">用戶名：</label>\r\n    <input type=\"text\" id=\"userCode\" v-model=\"userCode\" class=\"custom-input\" />\r\n\r\n    <label for=\"timeFrom\" class=\"custom-label\">開始時間：</label>\r\n    <input type=\"datetime-local\" id=\"timeFrom\" v-model=\"timeFrom\" class=\"custom-input\" />\r\n\r\n    <label for=\"timeTo\" class=\"custom-label\">結束時間：</label>\r\n    <input type=\"datetime-local\" id=\"timeTo\" v-model=\"timeTo\" class=\"custom-input\" />\r\n\r\n    <button @click=\"submit\" class=\"custom-button\">確定</button>\r\n  </div>\r\n  <table class=\"custom-table\">\r\n    <thead>\r\n      <tr>\r\n        <th>總覽</th>\r\n        <th>路書 ➜</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <td v-if=\"overviewData\">\r\n        <div><strong>用戶名：</strong>{{ userCode }}</div>\r\n        <div><strong>總筆數：</strong>{{ overviewData.total }}</div>\r\n        <div><strong>貨幣：</strong>{{ overviewData.totalCurrencyCode }}</div>\r\n        <div><strong>總投注金額：</strong>{{ overviewData.totalBetAmt }}</div>\r\n        <div><strong>總調整金額：</strong>{{ overviewData.totalBetAdjAmt }}</div>\r\n        <div><strong>總退款金額：</strong>{{ overviewData.totalBetRetAmt }}</div>\r\n        <div><strong>總監管收款金額：</strong>{{ overviewData.totalSupvRecvAmt }}</div>\r\n      </td>\r\n      <td>\r\n        <img\r\n          v-for=\"(bet, index) in userbetCode\"\r\n          :key=\"index\"\r\n          :src=\"getImagePath(bet.betCode)\"\r\n          alt=\"User Bet Code Image\"\r\n          @click=\"showBetDetails(bet.betId)\"\r\n        />\r\n      </td>\r\n    </tbody>\r\n  </table>\r\n  <div v-if=\"detailedData\" class=\"custom-table\">\r\n    <table>\r\n      <tbody>\r\n        <tr>\r\n          <th>前台注單號：</th>\r\n          <th>區域：</th>\r\n          <th>股東：</th>\r\n          <th>IP：</th>\r\n          <th>遊戲類型：</th>\r\n          <th>桌號：</th>\r\n          <th>牌局號：</th>\r\n          <th>牌靴：</th>\r\n          <th>牌號：</th>\r\n          <th>投注時間：</th>\r\n          <th>結算時間：</th>\r\n          <th>投注類型：</th>\r\n          <th>投注金額：</th>\r\n          <th>投注結果：</th>\r\n        </tr>\r\n        <tr>\r\n          <td>{{ detailedData.extBetId }}</td>\r\n          <td>{{ detailedData.parentCode }}</td>\r\n          <td>{{ detailedData.agentCode }}</td>\r\n          <td>{{ detailedData.sessionIp }}</td>\r\n          <td>{{ detailedData.gameType }}</td>\r\n          <td>{{ detailedData.gameCode }}</td>\r\n          <td>{{ detailedData.roundCode }}</td>\r\n          <td>{{ detailedData.roundShoe }}</td>\r\n          <td>{{ detailedData.roundNum }}</td>\r\n          <td>{{ formatTime(detailedData.betTime) }}</td>\r\n          <td>{{ formatTime(detailedData.settleTime) }}</td>\r\n          <td>{{ detailedData.betCode }}</td>\r\n          <td>{{ detailedData.betAmt }}</td>\r\n          <td>{{ detailedData.betResult }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  props: {\r\n    token: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      userCode: \"\", // 用戶名綁定的資料屬性\r\n      roundCode: \"\",\r\n      timeFrom: \"\",\r\n      timeTo: \"\",\r\n      page: 1,\r\n      pageSize: 1000,\r\n      responseData: null,\r\n      userbetCode: [], // 新增用於存儲 betCode 的數組\r\n      overviewData: null,\r\n      detailedData: null,\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    async submit() {\r\n      this.responseData = null;\r\n      this.overviewData = null;\r\n      this.userbetCode = null;\r\n      this.detailedData = null;\r\n\r\n      if (!this.userCode) {\r\n        // 用戶名為空，顯示錯誤信息並中止提交\r\n        alert(\"用戶名不能為空\");\r\n        return;\r\n      }\r\n      if (!this.timeFrom) {\r\n        // 時間為空，顯示錯誤信息並中止提交\r\n        alert(\"時間不能為空\");\r\n        return;\r\n      }\r\n      if (!this.timeTo) {\r\n        // 時間為空，顯示錯誤信息並中止提交\r\n        alert(\"時間不能為空\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.post(\r\n          \"https://nc-ugs-bo.ms16618.com/mgtapipb.MgtApiService/RptBetRec\",\r\n          {\r\n            userCode: this.userCode,\r\n            timeFrom: this.timeFrom + \":00\",\r\n            timeTo: this.timeTo + \":00\",\r\n            page: this.page,\r\n            pageSize: this.pageSize,\r\n            roundCode: this.roundCode,\r\n          },\r\n          {\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              accept: \"application/json\",\r\n              Authorization: `Bearer ${this.token}`, // 在這裡添加 token 到標頭中\r\n            },\r\n          }\r\n        );\r\n\r\n        // 將API返回的數據保存在responseData中，以便在模板中顯示\r\n        this.responseData = response.data;\r\n        console.log(`responseData：`, this.responseData);\r\n\r\n        // 將相關數據賦值給 overviewData\r\n        this.overviewData = {\r\n          total: this.responseData.total,\r\n          totalCurrencyCode: this.responseData.totalCurrencyCode,\r\n          totalBetAmt: this.responseData.totalBetAmt,\r\n          totalBetAdjAmt: this.responseData.totalBetAdjAmt,\r\n          totalBetRetAmt: this.responseData.totalBetRetAmt,\r\n          totalSupvRecvAmt: this.responseData.totalSupvRecvAmt,\r\n        };\r\n        console.log(`overviewData的data：`, this.overviewData);\r\n\r\n        this.userbetCode = response.data.data.map((bet) => ({\r\n          betCode: bet.betCode,\r\n          betId: bet.betId,\r\n        }));\r\n        console.log(`betCode：`, this.userbetCode);\r\n      } catch (error) {\r\n        // 請求失敗\r\n        console.error(\"請求失敗：\", error);\r\n      }\r\n    },\r\n    // 創建一個方法來根據 betCode 返回對應的圖片路徑\r\n    getImagePath(betCode) {\r\n      const imageMapping = {\r\n        BANKER: require(\"@/assets/BANKER.png\"),\r\n        PLAYER: require(\"@/assets/PLAYER.png\"),\r\n        TIE: require(\"@/assets/TIE.png\"),\r\n\r\n        // 其他 betCode 對應的路徑\r\n      };\r\n\r\n      // 如果找到對應的圖片路徑，則返回它；否則，返回默認的圖片路徑\r\n      return imageMapping[betCode] || require(\"@/assets/default.png\");\r\n    },\r\n    //點擊圖片\r\n    showBetDetails(betId) {\r\n      // 找到相應的投注紀錄\r\n      const betDetails = this.responseData.data.find((bet) => bet.betId === betId);\r\n\r\n      // 將投注紀錄保存到變數中\r\n      this.detailedData = betDetails;\r\n    },\r\n\r\n    formatTime(time) {\r\n      const options = {\r\n        year: \"numeric\",\r\n        month: \"numeric\",\r\n        day: \"numeric\",\r\n        hour: \"numeric\",\r\n        minute: \"numeric\",\r\n        second: \"numeric\",\r\n        hour12: false,\r\n        timeZone: \"Asia/Taipei\",\r\n      };\r\n\r\n      return new Date(time).toLocaleString(\"zh-TW\", options);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.custom-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 20px;\r\n}\r\n\r\n.custom-table th,\r\n.custom-table td {\r\n  border: 1px solid #dfd8d8;\r\n  padding: 8px;\r\n  text-align: left;\r\n  text-align: center;\r\n}\r\n\r\n.custom-table ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.custom-table th {\r\n  background-color: #e8f0e2;\r\n  width: 300px;\r\n}\r\n.custom-table tbody tr:nth-child(odd) {\r\n  background-color: #e9f0f1;\r\n}\r\n\r\n.custom-table tbody tr:nth-child(even) {\r\n  background-color: #e7eced;\r\n}\r\n\r\n.custom-table tbody tr:hover {\r\n  background-color: #f2f2f2;\r\n}\r\n\r\n.custom-label {\r\n  color: #000000;\r\n  font-size: 20px;\r\n  margin-right: 5px;\r\n  font-weight: bold;\r\n}\r\n\r\n.custom-input {\r\n  padding: 8px;\r\n  border: 1px solid #336699;\r\n  border-radius: 5px;\r\n  font-size: 14px;\r\n  margin-right: 1%;\r\n}\r\n\r\n.custom-button {\r\n  background-color: #ddebd1;\r\n  color: #000000;\r\n  padding: 8px 12px;\r\n  border: none;\r\n  border-radius: 10px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  cursor: pointer; /* 指針樣式 */\r\n}\r\n\r\n.custom-button:hover {\r\n  background-color: #a6c0e8;\r\n  color: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.sub-title {\r\n  color: #766f6f;\r\n  font-size: 16px;\r\n  margin-top: 1px;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}