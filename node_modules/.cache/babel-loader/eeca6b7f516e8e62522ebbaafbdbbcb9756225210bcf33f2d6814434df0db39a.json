{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-7ac30486\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  style: {\n    \"margin-top\": \"4%\"\n  }\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"timeFrom\",\n  class: \"custom-label\"\n}, \"開始時間：\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"timeTo\",\n  class: \"custom-label\"\n}, \"結束時間：\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  key: 0,\n  class: \"loading-spinner\"\n};\nconst _hoisted_5 = {\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"space-between\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"可疑玩家名單:\", -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h5\", {\n  class: \"sub-title\"\n}, \"(相同IP，不同用戶名)\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  class: \"custom-table\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", {\n  style: {\n    \"width\": \"5%\"\n  }\n}, \"NO.\", -1 /* HOISTED */));\nconst _hoisted_10 = {\n  style: {\n    \"display\": \"flex\",\n    \"justify-content\": \"space-between\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"可疑牌局名單:\", -1 /* HOISTED */));\nconst _hoisted_12 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h5\", {\n  class: \"sub-title\"\n}, \"(相同IP，相同牌局號，不同用戶名)\", -1 /* HOISTED */));\nconst _hoisted_13 = {\n  class: \"custom-table\"\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", {\n  style: {\n    \"width\": \"5%\"\n  }\n}, \"NO.\", -1 /* HOISTED */));\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"th\", null, \"用戶名\", -1 /* HOISTED */));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _withDirectives(_createElementVNode(\"input\", {\n    type: \"datetime-local\",\n    class: \"custom-input\",\n    id: \"timeFrom\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.timeFrom = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.timeFrom]]), _hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n    type: \"datetime-local\",\n    class: \"custom-input\",\n    id: \"timeTo\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.timeTo = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.timeTo]]), _createElementVNode(\"button\", {\n    class: \"custom-time\",\n    onClick: _cache[2] || (_cache[2] = $event => $options.setTimeRange('today'))\n  }, \"今日\"), _createElementVNode(\"button\", {\n    class: \"custom-time\",\n    onClick: _cache[3] || (_cache[3] = $event => $options.setTimeRange('yesterday'))\n  }, \"昨日\"), _createElementVNode(\"button\", {\n    class: \"custom-time\",\n    onClick: _cache[4] || (_cache[4] = $event => $options.setTimeRange('last3days'))\n  }, \"三日\"), _createElementVNode(\"button\", {\n    class: \"custom-time\",\n    onClick: _cache[5] || (_cache[5] = $event => $options.setTimeRange('thisWeek'))\n  }, \"本周\"), _createElementVNode(\"button\", {\n    class: \"custom-time\",\n    onClick: _cache[6] || (_cache[6] = $event => $options.setTimeRange('lastWeek'))\n  }, \"上周\"), _createElementVNode(\"button\", {\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.submit && $options.submit(...args)),\n    class: \"custom-button\",\n    style: {\n      \"margin-left\": \"20px\"\n    }\n  }, \"確定\"), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, \"搜尋中...\")) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"button\", {\n    class: \"custom-button\",\n    style: {\n      \"margin-left\": \"auto\",\n      \"margin-right\": \"1%\"\n    },\n    onClick: _cache[8] || (_cache[8] = () => {\n      $options.exportCsv($options.filteredData, '可疑玩家名單', false);\n    })\n  }, \" 導出CSV \")]), _hoisted_7, _createElementVNode(\"table\", _hoisted_8, [_createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_hoisted_9, _createElementVNode(\"th\", null, \"IP (\" + _toDisplayString($options.getTotalIPs($options.filteredData)) + \")\", 1 /* TEXT */), _createElementVNode(\"th\", null, \"代理 (\" + _toDisplayString($options.getTotalAgents($options.filteredData)) + \")\", 1 /* TEXT */), _createElementVNode(\"th\", null, \"用戶名 (\" + _toDisplayString($options.getTotalUsernames($options.filteredData)) + \")\", 1 /* TEXT */)])]), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredData, (records, userSessionIp, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: userSessionIp\n    }, [_createElementVNode(\"td\", null, _toDisplayString(index + 1), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(userSessionIp), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(records.agentInfo, (agentInfo, index) => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: index\n      }, _toDisplayString(agentInfo.agentCode), 1 /* TEXT */);\n    }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"td\", null, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(records.agentInfo, (agentInfo, index) => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: index\n      }, _toDisplayString(agentInfo.userCodes.join(\", \")), 1 /* TEXT */);\n    }), 128 /* KEYED_FRAGMENT */))])])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _createElementVNode(\"button\", {\n    class: \"custom-button\",\n    style: {\n      \"margin-left\": \"auto\",\n      \"margin-right\": \"1%\"\n    },\n    onClick: _cache[9] || (_cache[9] = () => {\n      $options.exportCsv($options.filteredData2, '可疑牌局名單', true);\n    })\n  }, \" 導出CSV \")]), _hoisted_12, _createElementVNode(\"table\", _hoisted_13, [_createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_hoisted_14, _createElementVNode(\"th\", null, \"IP (\" + _toDisplayString($options.getTotalIPs($options.filteredData2)) + \")\", 1 /* TEXT */), _createElementVNode(\"th\", null, \"牌局號 (\" + _toDisplayString($options.getTotalRounds($options.filteredData2)) + \")\", 1 /* TEXT */), _hoisted_15])]), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filteredData2, (records, userSessionIp, index) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: userSessionIp\n    }, [_createElementVNode(\"td\", null, _toDisplayString(index + 1), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(userSessionIp), 1 /* TEXT */), _createElementVNode(\"td\", null, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(records.roundInfo, (roundInfo, index) => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: index\n      }, _toDisplayString(roundInfo.roundCode), 1 /* TEXT */);\n    }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"td\", null, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(records.roundInfo, (roundInfo, index) => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: index\n      }, _toDisplayString(roundInfo.userCodes.join(\", \")), 1 /* TEXT */);\n    }), 128 /* KEYED_FRAGMENT */))])])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["style","_createElementVNode","for","class","_createElementBlock","_hoisted_1","_hoisted_2","type","id","$data","timeFrom","$event","_hoisted_3","timeTo","onClick","_cache","$options","setTimeRange","args","submit","loading","_hoisted_4","_hoisted_5","_hoisted_6","exportCsv","filteredData","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","getTotalIPs","getTotalAgents","getTotalUsernames","_Fragment","_renderList","records","userSessionIp","index","key","agentInfo","agentCode","userCodes","join","_hoisted_10","_hoisted_11","filteredData2","_hoisted_12","_hoisted_13","_hoisted_14","getTotalRounds","_hoisted_15","roundInfo","roundCode"],"sources":["C:\\Users\\u0921\\vue-ace1\\src\\components\\Suspiciousplayerpage.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\r\n<template>\r\n  <div style=\"margin-top: 4%\">\r\n    <label for=\"timeFrom\" class=\"custom-label\">開始時間：</label>\r\n    <input type=\"datetime-local\" class=\"custom-input\" id=\"timeFrom\" v-model=\"timeFrom\" />\r\n\r\n    <label for=\"timeTo\" class=\"custom-label\">結束時間：</label>\r\n    <input type=\"datetime-local\" class=\"custom-input\" id=\"timeTo\" v-model=\"timeTo\" />\r\n\r\n    <button class=\"custom-time\" @click=\"setTimeRange('today')\">今日</button>\r\n    <button class=\"custom-time\" @click=\"setTimeRange('yesterday')\">昨日</button>\r\n    <button class=\"custom-time\" @click=\"setTimeRange('last3days')\">三日</button>\r\n    <button class=\"custom-time\" @click=\"setTimeRange('thisWeek')\">本周</button>\r\n    <button class=\"custom-time\" @click=\"setTimeRange('lastWeek')\">上周</button>\r\n\r\n    <button @click=\"submit\" class=\"custom-button\" style=\"margin-left: 20px\">確定</button>\r\n    <div v-if=\"loading\" class=\"loading-spinner\">搜尋中...</div>\r\n\r\n    <div style=\"display: flex; justify-content: space-between; align-items: center\">\r\n      <h2>可疑玩家名單:</h2>\r\n      <button\r\n        class=\"custom-button\"\r\n        style=\"margin-left: auto; margin-right: 1%\"\r\n        @click=\"\r\n          () => {\r\n            exportCsv(filteredData, '可疑玩家名單', false);\r\n          }\r\n        \"\r\n      >\r\n        導出CSV\r\n      </button>\r\n    </div>\r\n    <h5 class=\"sub-title\">(相同IP，不同用戶名)</h5>\r\n\r\n    <table class=\"custom-table\">\r\n      <thead>\r\n        <tr>\r\n          <th style=\"width: 5%\">NO.</th>\r\n          <th>IP ({{ getTotalIPs(filteredData) }})</th>\r\n          <th>代理 ({{ getTotalAgents(filteredData) }})</th>\r\n          <th>用戶名 ({{ getTotalUsernames(filteredData) }})</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <template\r\n          v-for=\"(records, userSessionIp, index) in filteredData\"\r\n          :key=\"userSessionIp\"\r\n        >\r\n          <tr>\r\n            <td>{{ index + 1 }}</td>\r\n            <td>{{ userSessionIp }}</td>\r\n            <td>\r\n              <ul>\r\n                <li v-for=\"(agentInfo, index) in records.agentInfo\" :key=\"index\">\r\n                  {{ agentInfo.agentCode }}\r\n                </li>\r\n              </ul>\r\n            </td>\r\n            <td>\r\n              <ul>\r\n                <li v-for=\"(agentInfo, index) in records.agentInfo\" :key=\"index\">\r\n                  {{ agentInfo.userCodes.join(\", \") }}\r\n                </li>\r\n              </ul>\r\n            </td>\r\n          </tr>\r\n        </template>\r\n      </tbody>\r\n    </table>\r\n\r\n    <div style=\"display: flex; justify-content: space-between; align-items: center\">\r\n      <h2>可疑牌局名單:</h2>\r\n      <button\r\n        class=\"custom-button\"\r\n        style=\"margin-left: auto; margin-right: 1%\"\r\n        @click=\"\r\n          () => {\r\n            exportCsv(filteredData2, '可疑牌局名單', true);\r\n          }\r\n        \"\r\n      >\r\n        導出CSV\r\n      </button>\r\n    </div>\r\n    <h5 class=\"sub-title\">(相同IP，相同牌局號，不同用戶名)</h5>\r\n    <table class=\"custom-table\">\r\n      <thead>\r\n        <tr>\r\n          <th style=\"width: 5%\">NO.</th>\r\n          <th>IP ({{ getTotalIPs(filteredData2) }})</th>\r\n          <th>牌局號 ({{ getTotalRounds(filteredData2) }})</th>\r\n          <th>用戶名</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <template\r\n          v-for=\"(records, userSessionIp, index) in filteredData2\"\r\n          :key=\"userSessionIp\"\r\n        >\r\n          <tr>\r\n            <td>{{ index + 1 }}</td>\r\n            <td>{{ userSessionIp }}</td>\r\n            <td>\r\n              <ul>\r\n                <li v-for=\"(roundInfo, index) in records.roundInfo\" :key=\"index\">\r\n                  {{ roundInfo.roundCode }}\r\n                </li>\r\n              </ul>\r\n            </td>\r\n            <td>\r\n              <ul>\r\n                <li v-for=\"(roundInfo, index) in records.roundInfo\" :key=\"index\">\r\n                  {{ roundInfo.userCodes.join(\", \") }}\r\n                </li>\r\n              </ul>\r\n            </td>\r\n          </tr>\r\n        </template>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  props: {\r\n    token: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      userCode: \"\",\r\n      roundCode: \"\",\r\n      timeFrom: \"\",\r\n      timeTo: \"\",\r\n      page: 1,\r\n      pageSize: 10000,\r\n      responseData1: null,\r\n      filteredData: {},\r\n      filteredData2: {},\r\n      loading: false,\r\n    };\r\n  },\r\n  computed: {\r\n    // eslint-disable-next-line vue/no-dupe-keys\r\n    filteredData() {\r\n      if (!this.responseData1) {\r\n        return {};\r\n      }\r\n\r\n      const filteredData = {};\r\n\r\n      this.responseData1.data.forEach((record) => {\r\n        const key = record.sessionIp;\r\n\r\n        if (!filteredData[key]) {\r\n          filteredData[key] = {\r\n            agentInfo: [],\r\n            userCodes: new Set(),\r\n          };\r\n        }\r\n\r\n        const existingAgentInfo = filteredData[key].agentInfo.find(\r\n          (info) => info.agentCode === record.agentCode\r\n        );\r\n\r\n        if (existingAgentInfo) {\r\n          existingAgentInfo.userCodes.add(record.userCode);\r\n        } else {\r\n          filteredData[key].agentInfo.push({\r\n            agentCode: record.agentCode,\r\n            userCodes: new Set([record.userCode]),\r\n          });\r\n        }\r\n\r\n        filteredData[key].userCodes.add(record.userCode);\r\n      });\r\n\r\n      for (const key in filteredData) {\r\n        filteredData[key].userCodes = Array.from(filteredData[key].userCodes);\r\n\r\n        filteredData[key].agentInfo.forEach((info) => {\r\n          info.userCodes = Array.from(info.userCodes);\r\n        });\r\n      }\r\n\r\n      for (const key in filteredData) {\r\n        if (filteredData[key].userCodes.length < 2) {\r\n          delete filteredData[key];\r\n        }\r\n      }\r\n\r\n      return filteredData;\r\n    },\r\n\r\n    // eslint-disable-next-line vue/no-dupe-keys\r\n    filteredData2() {\r\n      if (!this.responseData1) {\r\n        return {};\r\n      }\r\n\r\n      const filteredData2 = {};\r\n\r\n      this.responseData1.data.forEach((record) => {\r\n        const key = record.sessionIp;\r\n\r\n        if (!filteredData2[key]) {\r\n          filteredData2[key] = {\r\n            roundInfo: [],\r\n            userCodes: new Set(),\r\n          };\r\n        }\r\n\r\n        const existingRoundInfo = filteredData2[key].roundInfo.find(\r\n          (info) => info.roundCode === record.roundCode\r\n        );\r\n\r\n        if (existingRoundInfo) {\r\n          existingRoundInfo.userCodes.add(record.userCode);\r\n        } else {\r\n          filteredData2[key].roundInfo.push({\r\n            roundCode: record.roundCode,\r\n            userCodes: new Set([record.userCode]),\r\n          });\r\n        }\r\n\r\n        filteredData2[key].userCodes.add(record.userCode);\r\n      });\r\n\r\n      for (const key in filteredData2) {\r\n        filteredData2[key].userCodes = Array.from(filteredData2[key].userCodes);\r\n\r\n        filteredData2[key].roundInfo.forEach((info) => {\r\n          info.userCodes = Array.from(info.userCodes);\r\n\r\n          // 如果 roundCode 為空，將其更改為 \"undefined\"\r\n          info.roundCode = info.roundCode || \"undefined\";\r\n        });\r\n\r\n        filteredData2[key].roundInfo = filteredData2[key].roundInfo.filter(\r\n          (info) => info.userCodes.length >= 2\r\n        );\r\n      }\r\n\r\n      for (const key in filteredData2) {\r\n        if (filteredData2[key].roundInfo.length === 0) {\r\n          delete filteredData2[key];\r\n        }\r\n      }\r\n\r\n      return filteredData2;\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    async submit() {\r\n      if (!this.timeFrom) {\r\n        // 時間為空，顯示錯誤信息並中止提交\r\n        alert(\"時間不能為空\");\r\n        return;\r\n      }\r\n      if (!this.timeTo) {\r\n        // 時間為空，顯示錯誤信息並中止提交\r\n        alert(\"時間不能為空\");\r\n        return;\r\n      }\r\n\r\n      this.filteredData = {};\r\n      this.filteredData2 = {};\r\n\r\n      this.loading = true;\r\n\r\n      try {\r\n        const response = await axios.post(\r\n          \"https://nc-ugs-bo.ms16618.com/mgtapipb.MgtApiService/RptBetRec\",\r\n          {\r\n            userCode: this.userCode,\r\n            timeFrom: this.timeFrom + \":00\",\r\n            timeTo: this.timeTo + \":00\",\r\n            page: this.page,\r\n            pageSize: this.pageSize,\r\n            roundCode: this.roundCode,\r\n          },\r\n          {\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              accept: \"application/json\",\r\n              Authorization: `Bearer ${this.token}`, // 在這裡添加 token 到標頭中\r\n            },\r\n          }\r\n        );\r\n\r\n        // 將API返回的數據保存在responseData1中，以便在模板中顯示\r\n        this.responseData1 = response.data;\r\n        console.log(\"第一個API的data：\", this.responseData1);\r\n        this.loading = false;\r\n      } catch (error) {\r\n        // 請求失敗\r\n        this.loading = false;\r\n        console.error(\"請求失敗：\", error);\r\n      }\r\n    },\r\n\r\n    async exportCsv(data, fileName, isData2) {\r\n      try {\r\n        // 确保数据不是 undefined 或 null\r\n        if (!data || Object.keys(data).length === 0) {\r\n          console.error(\"數據為空，無法導出CSV\");\r\n          return;\r\n        }\r\n\r\n        // 将数据转换为 CSV 格式字符串\r\n        const csv = this.convertToCsv(data, isData2);\r\n\r\n        // 创建一个 Blob 对象\r\n        const blob = new Blob([csv], { type: \"text/csv;charset=utf-8;\" });\r\n\r\n        // 创建一个下载链接\r\n        const link = document.createElement(\"a\");\r\n        if (link.download !== undefined) {\r\n          // 支持 download 属性的浏览器\r\n          const url = URL.createObjectURL(blob);\r\n          link.setAttribute(\"href\", url);\r\n          link.setAttribute(\"download\", fileName + \".csv\");\r\n          link.style.visibility = \"hidden\";\r\n          document.body.appendChild(link);\r\n          link.click();\r\n          document.body.removeChild(link);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"導出CSV失敗：\", error);\r\n      }\r\n    },\r\n\r\n    convertToCsv(data, isData2) {\r\n      console.log(\"isData2:\", isData2); // 新增這行\r\n      // 將數據轉換為 CSV 格式字符串\r\n      let header, body;\r\n\r\n      if (isData2) {\r\n        header = \"IP,Round Code,User Code\";\r\n        body = Object.entries(data)\r\n          .map(([ip, info]) =>\r\n            (info.roundInfo || []).map(\r\n              (round) =>\r\n                `${ip},${round.roundCode || \"\"},${(round.userCodes || []).join(\",\")}`\r\n            )\r\n          )\r\n          .flat()\r\n          .join(\"\\n\");\r\n      } else {\r\n        header = \"IP,Agent Code,User Code\";\r\n        body = Object.entries(data)\r\n          .map(([ip, info]) =>\r\n            (info.agentInfo || []).map(\r\n              (agent) =>\r\n                `${ip},${agent.agentCode || \"\"},${(agent.userCodes || []).join(\",\")}`\r\n            )\r\n          )\r\n          .flat()\r\n          .join(\"\\n\");\r\n      }\r\n\r\n      return header + \"\\n\" + body;\r\n    },\r\n\r\n    getTotalIPs(data) {\r\n      return Object.keys(data).length;\r\n    },\r\n\r\n    getTotalAgents(data) {\r\n      return Object.values(data).reduce(\r\n        (sum, info) => sum + (info.agentInfo || []).length,\r\n        0\r\n      );\r\n    },\r\n\r\n    getTotalUsernames(data) {\r\n      return Object.values(data).reduce(\r\n        (sum, info) => sum + (info.userCodes || []).length,\r\n        0\r\n      );\r\n    },\r\n\r\n    getTotalRounds(data) {\r\n      return Object.values(data).reduce(\r\n        (sum, info) => sum + (info.roundInfo || []).length,\r\n        0\r\n      );\r\n    },\r\n\r\n    setTimeRange(range) {\r\n      const now = new Date();\r\n      switch (range) {\r\n        case \"today\":\r\n          this.timeFrom = this.formatDate(\r\n            new Date(now.getFullYear(), now.getMonth(), now.getDate(), 0, 0)\r\n          );\r\n          this.timeTo = this.formatDate(\r\n            new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0)\r\n          );\r\n          break;\r\n        case \"yesterday\":\r\n          // eslint-disable-next-line no-case-declarations\r\n          const yesterday = new Date(now);\r\n          yesterday.setDate(now.getDate() - 1);\r\n          this.timeFrom = this.formatDate(\r\n            new Date(\r\n              yesterday.getFullYear(),\r\n              yesterday.getMonth(),\r\n              yesterday.getDate(),\r\n              0,\r\n              0\r\n            )\r\n          );\r\n          this.timeTo = this.formatDate(\r\n            new Date(now.getFullYear(), now.getMonth(), now.getDate(), 0, 0)\r\n          );\r\n          break;\r\n        case \"last3days\":\r\n          // eslint-disable-next-line no-case-declarations\r\n          const threeDaysAgo = new Date(now);\r\n          threeDaysAgo.setDate(now.getDate() - 2); // 最近三天包括今天，所以减2\r\n          this.timeFrom = this.formatDate(\r\n            new Date(\r\n              threeDaysAgo.getFullYear(),\r\n              threeDaysAgo.getMonth(),\r\n              threeDaysAgo.getDate(),\r\n              0,\r\n              0\r\n            )\r\n          );\r\n          this.timeTo = this.formatDate(\r\n            new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0)\r\n          );\r\n          break;\r\n        case \"thisWeek\":\r\n          // eslint-disable-next-line no-case-declarations\r\n          const thisMonday = new Date(now);\r\n          thisMonday.setDate(\r\n            now.getDate() - now.getDay() + (now.getDay() === 0 ? -6 : 1)\r\n          );\r\n          this.timeFrom = this.formatDate(\r\n            new Date(\r\n              thisMonday.getFullYear(),\r\n              thisMonday.getMonth(),\r\n              thisMonday.getDate(),\r\n              0,\r\n              0\r\n            )\r\n          );\r\n          this.timeTo = this.formatDate(\r\n            new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0)\r\n          );\r\n          break;\r\n        case \"lastWeek\":\r\n          // eslint-disable-next-line no-case-declarations\r\n          const lastMonday = new Date(now);\r\n          lastMonday.setDate(now.getDate() - now.getDay() - 6);\r\n          // eslint-disable-next-line no-case-declarations\r\n          const lastSunday = new Date(now);\r\n          lastSunday.setDate(now.getDate() - now.getDay());\r\n          this.timeFrom = this.formatDate(\r\n            new Date(\r\n              lastMonday.getFullYear(),\r\n              lastMonday.getMonth(),\r\n              lastMonday.getDate(),\r\n              0,\r\n              0\r\n            )\r\n          );\r\n          this.timeTo = this.formatDate(\r\n            new Date(\r\n              lastSunday.getFullYear(),\r\n              lastSunday.getMonth(),\r\n              lastSunday.getDate() + 1,\r\n              0,\r\n              0\r\n            )\r\n          );\r\n          break;\r\n      }\r\n    },\r\n    // 格式化日期为适合datetime-local的格式\r\n    formatDate(date) {\r\n      const year = date.getFullYear();\r\n      const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\r\n      const day = date.getDate().toString().padStart(2, \"0\");\r\n      const hours = date.getHours().toString().padStart(2, \"0\");\r\n      const minutes = date.getMinutes().toString().padStart(2, \"0\");\r\n      return `${year}-${month}-${day}T${hours}:${minutes}`;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.custom-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 20px;\r\n}\r\n\r\n.custom-table th,\r\n.custom-table td {\r\n  border: 1px solid #dfd8d8;\r\n  padding: 8px;\r\n  text-align: left;\r\n  text-align: center;\r\n}\r\n\r\n.custom-table ul {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.custom-table th {\r\n  background-color: #e8f0e2;\r\n  width: 300px;\r\n}\r\n.custom-table tbody tr:nth-child(odd) {\r\n  background-color: #e9f0f1;\r\n}\r\n\r\n.custom-table tbody tr:nth-child(even) {\r\n  background-color: #e7eced;\r\n}\r\n\r\n.custom-table tbody tr:hover {\r\n  background-color: #f2f2f2;\r\n}\r\n\r\n.custom-label {\r\n  color: #000000;\r\n  font-size: 20px;\r\n  margin-right: 5px;\r\n  font-weight: bold;\r\n}\r\n\r\n.custom-input {\r\n  padding: 8px;\r\n  border: 1px solid #336699;\r\n  border-radius: 5px;\r\n  font-size: 14px;\r\n  margin-right: 1%;\r\n}\r\n\r\n.custom-time {\r\n  background-color: #d2f7f1;\r\n  color: #000000;\r\n  padding: 8px 12px;\r\n  border: none;\r\n  margin: 3px;\r\n  border-radius: 10px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  cursor: pointer; /* 指針樣式 */\r\n}\r\n\r\n.custom-time:hover {\r\n  background-color: rgb(204, 238, 189);\r\n  color: white;\r\n  cursor: pointer;\r\n}\r\n.custom-button {\r\n  background-color: #ddebd1;\r\n  color: #000000;\r\n  padding: 8px 12px;\r\n  margin: 3px;\r\n\r\n  border: none;\r\n  border-radius: 10px;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  cursor: pointer; /* 指針樣式 */\r\n}\r\n\r\n.custom-button:hover {\r\n  background-color: #a6c0e8;\r\n  color: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.sub-title {\r\n  color: #766f6f;\r\n  font-size: 16px;\r\n  margin-top: 1px;\r\n}\r\n\r\n.loading-spinner {\r\n  position: fixed;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  background: rgba(255, 255, 255, 0.8);\r\n  padding: 30px;\r\n  border-radius: 5px;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}