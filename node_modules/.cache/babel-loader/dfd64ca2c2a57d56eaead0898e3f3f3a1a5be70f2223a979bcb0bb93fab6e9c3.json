{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  props: {\n    token: {\n      type: String,\n      required: true\n    }\n  },\n  data() {\n    return {\n      userCode: \"\",\n      // 用戶名綁定的資料屬性\n      roundCode: \"\",\n      timeFrom: \"\",\n      timeTo: \"\",\n      page: 1,\n      pageSize: 1000,\n      responseData: null,\n      userbetCode: [],\n      // 新增用於存儲 betCode 的數組\n      overviewData: null,\n      detailedData: null\n    };\n  },\n  methods: {\n    async submit() {\n      this.responseData = null;\n      this.overviewData = null;\n      this.userbetCode = null;\n      this.detailedData = null;\n      if (!this.userCode) {\n        // 用戶名為空，顯示錯誤信息並中止提交\n        alert(\"用戶名不能為空\");\n        return;\n      }\n      if (!this.timeFrom) {\n        // 時間為空，顯示錯誤信息並中止提交\n        alert(\"時間不能為空\");\n        return;\n      }\n      if (!this.timeTo) {\n        // 時間為空，顯示錯誤信息並中止提交\n        alert(\"時間不能為空\");\n        return;\n      }\n      try {\n        const response = await axios.post(\"https://nc-ugs-bo.ms16618.com/mgtapipb.MgtApiService/RptBetRec\", {\n          userCode: this.userCode,\n          timeFrom: this.timeFrom + \":00\",\n          timeTo: this.timeTo + \":00\",\n          page: this.page,\n          pageSize: this.pageSize,\n          roundCode: this.roundCode\n        }, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            accept: \"application/json\",\n            Authorization: `Bearer ${this.token}` // 在這裡添加 token 到標頭中\n          }\n        });\n\n        // 將API返回的數據保存在responseData中，以便在模板中顯示\n        this.responseData = response.data;\n        console.log(`responseData：`, this.responseData);\n\n        // 將相關數據賦值給 overviewData\n        this.overviewData = {\n          total: this.responseData.total,\n          totalCurrencyCode: this.responseData.totalCurrencyCode,\n          totalBetAmt: this.responseData.totalBetAmt,\n          totalBetAdjAmt: this.responseData.totalBetAdjAmt,\n          totalBetRetAmt: this.responseData.totalBetRetAmt,\n          totalSupvRecvAmt: this.responseData.totalSupvRecvAmt\n        };\n        console.log(`overviewData的data：`, this.overviewData);\n        this.userbetCode = response.data.data.map(bet => ({\n          betCode: bet.betCode,\n          betId: bet.betId\n        }));\n        console.log(`betCode：`, this.userbetCode);\n      } catch (error) {\n        // 請求失敗\n        console.error(\"請求失敗：\", error);\n      }\n    },\n    // 創建一個方法來根據 betCode 返回對應的圖片路徑\n    getImagePath(betCode) {\n      const imageMapping = {\n        BANKER: require(\"@/assets/BANKER.png\"),\n        PLAYER: require(\"@/assets/PLAYER.png\"),\n        TIE: require(\"@/assets/TIE.png\")\n\n        // 其他 betCode 對應的路徑\n      };\n\n      // 如果找到對應的圖片路徑，則返回它；否則，返回默認的圖片路徑\n      return imageMapping[betCode] || require(\"@/assets/default.png\");\n    },\n    //點擊圖片\n    showBetDetails(betId) {\n      // 找到相應的投注紀錄\n      const betDetails = this.responseData.data.find(bet => bet.betId === betId);\n\n      // 將投注紀錄保存到變數中\n      this.detailedData = betDetails;\n    },\n    formatTime(time) {\n      const options = {\n        year: \"numeric\",\n        month: \"numeric\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"numeric\",\n        second: \"numeric\",\n        hour12: false,\n        timeZone: \"Asia/Taipei\"\n      };\n      return new Date(time).toLocaleString(\"zh-TW\", options);\n    }\n  }\n};","map":{"version":3,"names":["axios","props","token","type","String","required","data","userCode","roundCode","timeFrom","timeTo","page","pageSize","responseData","userbetCode","overviewData","detailedData","methods","submit","alert","response","post","headers","accept","Authorization","console","log","total","totalCurrencyCode","totalBetAmt","totalBetAdjAmt","totalBetRetAmt","totalSupvRecvAmt","map","bet","betCode","betId","error","getImagePath","imageMapping","BANKER","require","PLAYER","TIE","showBetDetails","betDetails","find","formatTime","time","options","year","month","day","hour","minute","second","hour12","timeZone","Date","toLocaleString"],"sources":["C:\\Users\\u0921\\vue-ace1\\src\\components\\Playroadpage.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div style=\"margin-top: 4%\">\n    <label for=\"userCode\" class=\"custom-label\">用戶名：</label>\n    <input type=\"text\" id=\"userCode\" v-model=\"userCode\" class=\"custom-input\" />\n\n    <label for=\"timeFrom\" class=\"custom-label\">開始時間：</label>\n    <input type=\"datetime-local\" id=\"timeFrom\" v-model=\"timeFrom\" class=\"custom-input\" />\n\n    <label for=\"timeTo\" class=\"custom-label\">結束時間：</label>\n    <input type=\"datetime-local\" id=\"timeTo\" v-model=\"timeTo\" class=\"custom-input\" />\n\n    <button @click=\"submit\" class=\"custom-button\">確定</button>\n  </div>\n  <table class=\"custom-table\">\n    <thead>\n      <tr>\n        <th>總覽</th>\n        <th>路書 ➜</th>\n      </tr>\n    </thead>\n    <tbody>\n      <td v-if=\"overviewData\">\n        <div><strong>用戶名：</strong>{{ userCode }}</div>\n        <div><strong>總筆數：</strong>{{ overviewData.total }}</div>\n        <div><strong>貨幣：</strong>{{ overviewData.totalCurrencyCode }}</div>\n        <div><strong>總投注金額：</strong>{{ overviewData.totalBetAmt }}</div>\n        <div><strong>總調整金額：</strong>{{ overviewData.totalBetAdjAmt }}</div>\n        <div><strong>總退款金額：</strong>{{ overviewData.totalBetRetAmt }}</div>\n        <div><strong>總監管收款金額：</strong>{{ overviewData.totalSupvRecvAmt }}</div>\n      </td>\n      <td>\n        <img\n          v-for=\"(bet, index) in userbetCode\"\n          :key=\"index\"\n          :src=\"getImagePath(bet.betCode)\"\n          alt=\"User Bet Code Image\"\n          @click=\"showBetDetails(bet.betId)\"\n        />\n      </td>\n    </tbody>\n  </table>\n  <div v-if=\"detailedData\" class=\"custom-table\">\n    <table>\n      <tbody>\n        <tr>\n          <th>前台注單號：</th>\n          <th>區域：</th>\n          <th>股東：</th>\n          <th>IP：</th>\n          <th>遊戲類型：</th>\n          <th>桌號：</th>\n          <th>牌局號：</th>\n          <th>牌靴：</th>\n          <th>牌號：</th>\n          <th>投注時間：</th>\n          <th>結算時間：</th>\n          <th>投注類型：</th>\n          <th>投注金額：</th>\n          <th>投注結果：</th>\n        </tr>\n        <tr>\n          <td>{{ detailedData.extBetId }}</td>\n          <td>{{ detailedData.parentCode }}</td>\n          <td>{{ detailedData.agentCode }}</td>\n          <td>{{ detailedData.sessionIp }}</td>\n          <td>{{ detailedData.gameType }}</td>\n          <td>{{ detailedData.gameCode }}</td>\n          <td>{{ detailedData.roundCode }}</td>\n          <td>{{ detailedData.roundShoe }}</td>\n          <td>{{ detailedData.roundNum }}</td>\n          <td>{{ formatTime(detailedData.betTime) }}</td>\n          <td>{{ formatTime(detailedData.settleTime) }}</td>\n          <td>{{ detailedData.betCode }}</td>\n          <td>{{ detailedData.betAmt }}</td>\n          <td>{{ detailedData.betResult }}</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  props: {\n    token: {\n      type: String,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      userCode: \"\", // 用戶名綁定的資料屬性\n      roundCode: \"\",\n      timeFrom: \"\",\n      timeTo: \"\",\n      page: 1,\n      pageSize: 1000,\n      responseData: null,\n      userbetCode: [], // 新增用於存儲 betCode 的數組\n      overviewData: null,\n      detailedData: null,\n    };\n  },\n\n  methods: {\n    async submit() {\n      this.responseData = null;\n      this.overviewData = null;\n      this.userbetCode = null;\n      this.detailedData = null;\n\n      if (!this.userCode) {\n        // 用戶名為空，顯示錯誤信息並中止提交\n        alert(\"用戶名不能為空\");\n        return;\n      }\n      if (!this.timeFrom) {\n        // 時間為空，顯示錯誤信息並中止提交\n        alert(\"時間不能為空\");\n        return;\n      }\n      if (!this.timeTo) {\n        // 時間為空，顯示錯誤信息並中止提交\n        alert(\"時間不能為空\");\n        return;\n      }\n\n      try {\n        const response = await axios.post(\n          \"https://nc-ugs-bo.ms16618.com/mgtapipb.MgtApiService/RptBetRec\",\n          {\n            userCode: this.userCode,\n            timeFrom: this.timeFrom + \":00\",\n            timeTo: this.timeTo + \":00\",\n            page: this.page,\n            pageSize: this.pageSize,\n            roundCode: this.roundCode,\n          },\n          {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              accept: \"application/json\",\n              Authorization: `Bearer ${this.token}`, // 在這裡添加 token 到標頭中\n            },\n          }\n        );\n\n        // 將API返回的數據保存在responseData中，以便在模板中顯示\n        this.responseData = response.data;\n        console.log(`responseData：`, this.responseData);\n\n        // 將相關數據賦值給 overviewData\n        this.overviewData = {\n          total: this.responseData.total,\n          totalCurrencyCode: this.responseData.totalCurrencyCode,\n          totalBetAmt: this.responseData.totalBetAmt,\n          totalBetAdjAmt: this.responseData.totalBetAdjAmt,\n          totalBetRetAmt: this.responseData.totalBetRetAmt,\n          totalSupvRecvAmt: this.responseData.totalSupvRecvAmt,\n        };\n        console.log(`overviewData的data：`, this.overviewData);\n\n        this.userbetCode = response.data.data.map((bet) => ({\n          betCode: bet.betCode,\n          betId: bet.betId,\n        }));\n        console.log(`betCode：`, this.userbetCode);\n      } catch (error) {\n        // 請求失敗\n        console.error(\"請求失敗：\", error);\n      }\n    },\n    // 創建一個方法來根據 betCode 返回對應的圖片路徑\n    getImagePath(betCode) {\n      const imageMapping = {\n        BANKER: require(\"@/assets/BANKER.png\"),\n        PLAYER: require(\"@/assets/PLAYER.png\"),\n        TIE: require(\"@/assets/TIE.png\"),\n\n        // 其他 betCode 對應的路徑\n      };\n\n      // 如果找到對應的圖片路徑，則返回它；否則，返回默認的圖片路徑\n      return imageMapping[betCode] || require(\"@/assets/default.png\");\n    },\n    //點擊圖片\n    showBetDetails(betId) {\n      // 找到相應的投注紀錄\n      const betDetails = this.responseData.data.find((bet) => bet.betId === betId);\n\n      // 將投注紀錄保存到變數中\n      this.detailedData = betDetails;\n    },\n\n    formatTime(time) {\n      const options = {\n        year: \"numeric\",\n        month: \"numeric\",\n        day: \"numeric\",\n        hour: \"numeric\",\n        minute: \"numeric\",\n        second: \"numeric\",\n        hour12: false,\n        timeZone: \"Asia/Taipei\",\n      };\n\n      return new Date(time).toLocaleString(\"zh-TW\", options);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.custom-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n}\n\n.custom-table th,\n.custom-table td {\n  border: 1px solid #dfd8d8;\n  padding: 8px;\n  text-align: left;\n  text-align: center;\n}\n\n.custom-table ul {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n\n.custom-table th {\n  background-color: #e8f0e2;\n  width: 300px;\n}\n.custom-table tbody tr:nth-child(odd) {\n  background-color: #e9f0f1;\n}\n\n.custom-table tbody tr:nth-child(even) {\n  background-color: #e7eced;\n}\n\n.custom-table tbody tr:hover {\n  background-color: #f2f2f2;\n}\n\n.custom-label {\n  color: #000000;\n  font-size: 20px;\n  margin-right: 5px;\n  font-weight: bold;\n}\n\n.custom-input {\n  padding: 8px;\n  border: 1px solid #336699;\n  border-radius: 5px;\n  font-size: 14px;\n  margin-right: 1%;\n}\n\n.custom-button {\n  background-color: #ddebd1;\n  color: #000000;\n  padding: 8px 12px;\n  border: none;\n  border-radius: 10px;\n  font-size: 16px;\n  font-weight: bold;\n  cursor: pointer; /* 指針樣式 */\n}\n\n.custom-button:hover {\n  background-color: #a6c0e8;\n  color: white;\n  cursor: pointer;\n}\n\n.sub-title {\n  color: #766f6f;\n  font-size: 16px;\n  margin-top: 1px;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}